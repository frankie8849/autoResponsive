/*! autoResponsive - v1.3 - 2013-10-17 11:05:58 AM
* Copyright (c) 2013 xudafeng; Licensed  */
KISSY.add("gallery/autoResponsive/1.3/plugin/sort",function(e){"use strict";function t(e){return this instanceof t?(this._makeCfg(e),void 0):new t(e)}var n=e.DOM,i={};return e.augment(t,{init:function(t){var n=this;n.owner=t,n.actions=[],n.owner.on("beforeLocate",function(e){n.elms=e.autoResponsive.elms;for(var t=0;n.actions.length>t;t++)e.autoResponsive.actions.push(n.actions[t])}),e.log("plugin sort::init")},_makeCfg:function(e){e=i,this.config=e},changeCfg:function(t){this._makeCfg(e.merge(this.config,t))},random:function(){var e=this;e.clear(),e.actions.push(function(e){return parseInt(Math.random()*e.length)})},priority:function(t){var i=this,r=t.attrName||"data-priority",o=[],a=-1;e.each(i.elms,function(e){(t.dataAttr&&n.attr(e,r)==t.dataAttr||n.hasClass(e,t.classAttr))&&o.push(e)}),i.actions.push(function(t,n,i){return e.inArray(i[n],o)?(a++,a):t.length})},reverse:function(){var e=this;e.actions.push(function(){return 0})},filter:function(t){var i=this;i.clear();for(var r=t.attrName||["data-filter"],o=0;r.length>o;o++){var a=r[o]||"data-filter";i.actions.push(function(i,r,o){if(n.hasAttr(o[r],a)&&n.attr(o[r],a)==t.dataAttr)n.show(o[r]);else if(n.hasClass(o[r],t.classAttr))n.show(o[r]);else{if(!n.hasAttr(o[r],a)||!e.inArray(n.attr(o[r],a),t.dataAttr))return t.hide&&n.hide(o[r]),!0;n.show(o[r])}})}},custom:function(e){var t=this;t.actions.push(e)},clear:function(){var e=this;e.actions=[]},restore:function(){var e=this;e.actions.pop()}}),t},{requires:["dom"]});